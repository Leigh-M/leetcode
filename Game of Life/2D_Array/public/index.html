<!DOCTYPE html>
<meta charset="utf-8">
<html lang="en">

<head>
<link rel="icon" href="images/favicon.png">
<title>lifeCanvas</title>
</head>

<body>
<canvas id = "life" width ="300" height = "300" style = "border: solid black; ">
</canvas>
<script>
  let canv = document.getElementById("life");
  let ctx = canv.getContext("2d");

  function createGrid(rows, cols) {
    let grid = [];
    for (let i = 0; i < rows; i++) {
      grid[i] = [];
      for (let j = 0; j < cols; j++) {
        grid[i][j] = Math.round(Math.random());
      }
    }
    return grid;
  }

  const grid = createGrid(300, 300);
  
  function draw() {
    ctx.clearRect(0, 0, 300, 300)
    function life(board) {
      const copy = JSON.parse(JSON.stringify(grid));
      const cols = board[0].length;
      const rows = board.length;
      let count = 0;
      for (let i = 0; i < rows; i++) {
        for (let j = 0; j < cols; j++) {
          count = 0;

          if (i - 1 >= 0 && j - 1 >= 0) {
            if (copy[i - 1][j - 1] === 1) count++;
          }

          if (i + 1 < rows && j + 1 < cols) {
            if (copy[i + 1][j + 1] === 1) count++;
          }

          if (i - 1 >= 0 && j + 1 < cols) {
            if (copy[i - 1][j + 1] === 1) count++;
          }

          if (i + 1 < rows && j - 1 >= 0) {
            if (copy[i + 1][j - 1] === 1) count++;
          }

          if (j - 1 >= 0) {
            if (copy[i][j - 1] === 1) count++;
          }

          if (i - 1 >= 0) {
            if (copy[i - 1][j] === 1) count++;
          }

          if (i + 1 < rows) {
            if (copy[i + 1][j] === 1) count++;
          }

          if (j + 1 < cols) {
            if (copy[i][j + 1] === 1) count++;
          }

          if (copy[i][j] === 1) {
            board[i][j] = (count >= 2 && count <= 3) ? 1 : 0;
          }
          if (copy[i][j] === 0) {
            if (count === 3) board[i][j] = 1;
          }
        }
      }
      // return board;
    }
    life(grid);

    ctx.fillStyle = "#101010"
    for (let i = 0; i < grid.length; i++) {
      for (let j = 0; j < grid[0].length; j++) {
        if (grid[i][j] === 1) {
          ctx.fillRect(i, j, 1, 1);
        }
      }
    }
  }
  setInterval(function() {draw(), 20});

</script>
</body>
</html>
